<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gyejoong.mdmuserweb.dao.IDao">
	<select id="Profile" resultType="com.gyejoong.mdmuserweb.vo.UserVo">
		select employee_num, Name, Rank, Department,
    			Date_of_birth, Address, device_info.created_at, OTP from user_info 
    			inner join device_info
    			on employee_num = User_info_employee_num
    			where employee_num = #{username}
	</select>
	
	<select id="BoardList" resultType="com.gyejoong.mdmuserweb.vo.BoardVo">
		select * from control_board 
		where User_info_employee_num = #{username} order by 
		idcontrol_board desc
	</select>
	
	<select id="BoardView" resultType="com.gyejoong.mdmuserweb.vo.BoardVo">
		SELECT * FROM control_board 
		where idcontrol_board=#{id}
	</select>
	
	<select id="BoardCount" resultType="int">
		SELECT count(*) as count FROM control_board 
		where User_info_employee_num = #{username}
	</select>
	
	<insert id="BoardWrite">
		insert into control_board (User_info_employee_num, 
		title, contents) values (#{param1}, #{param2}, #{param3})
	</insert>
	
	<delete id="BoardDelete">
		delete from control_board where User_info_employee_num = #{param1}
		and idcontrol_board = #{param2}
	</delete>
	
	<update id="BoardUpdate">
		update control_board set title = #{param3}, contents = #{param4}
		where User_info_employee_num = #{param1} and idcontrol_board = #{param2}
	</update>
	
</mapper>
